<!DOCTYPE html>
<html>
<head>
  <title>臺北站列車資訊</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    #trainInfoContainer {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
    }

    .trainInfo {
      background-color: #fff;
      padding: 20px;
      text-align: center;
      width: 45%;
    }
  </style>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var trainInfoContainer = document.getElementById("trainInfoContainer");

      function getTrainInfo() {
        // 使用fetch函式發送GET請求到API獲取列車資訊
        var apiUrl = "https://ptx.transportdata.tw/MOTC/v3/Rail/TRA/LiveTrainDelay?$filter=StationID eq '1008'&$top=100&$format=JSON";

        fetch(apiUrl)
          .then(response => response.json())
          .then(data => {
            // 取得API回傳的列車資訊
            var trains = data.filter(train => train.Direction === 0 || train.Direction === 1);

            // 顯示往北上方向的列車資訊
            var northboundTrainInfoHTML = `
              <div class="trainInfo">
                <h3>往北上方向</h3>
                ${trains.filter(train => train.Direction === 0).map(train => `
                  <p>車次：${train.TrainNo}</p>
                  <p>車種：${train.TrainTypeName.Zh_tw}</p>
                  <p>終點站：${train.EndingStationName.Zh_tw}</p>
                  <p>經由線路：${train.Routes[0].RouteName.Zh_tw}</p>
                  <p>準/誤點：${train.DelayTime} 分鐘</p>
                `).join("")}
              </div>
            `;

            // 顯示往南下方向的列車資訊
            var southboundTrainInfoHTML = `
              <div class="trainInfo">
                <h3>往南下方向</h3>
                ${trains.filter(train => train.Direction === 1).map(train => `
                  <p>車次：${train.TrainNo}</p>
                  <p>車種：${train.TrainTypeName.Zh_tw}</p>
                  <p>終點站：${train.EndingStationName.Zh_tw}</p>
                  <p>經由線路：${train.Routes[0].RouteName.Zh_tw}</p>
                  <p>準/誤點：${train.DelayTime} 分鐘</p>
                `).join("")}
              </div>
            `;

            // 將列車資訊顯示在網頁上
            trainInfoContainer.innerHTML = northboundTrainInfoHTML + southboundTrainInfoHTML;
          })
          .catch(error => {
            console.error("取得列車資訊時發生錯誤：", error);
          });
      }

      // 每隔一段時間更新列車資訊
      setInterval(getTrainInfo, 5000);
    });
  </script>
</head>
<body>
  <h1>臺北站列車資訊</h1>
  <div id="trainInfoContainer"></div>
</body>
</html>
